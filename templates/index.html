<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>–í–∞–ª–µ–Ω—Ç–∏–Ω–∫–∞ üíñ</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
    margin: 0;
    height: 100vh;
    background: #0f0f1a;
    color: white;
    font-family: Arial, sans-serif;
    overflow: hidden;
    display: flex;
    justify-content: center;
    align-items: center;
    text-align: center;
}

.container {
    z-index: 2;
}

button {
    padding: 15px 25px;
    font-size: 18px;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    margin: 10px;
}

#yesBtn {
    background: #ff4d6d;
    color: white;
}

#noBtn {
    background: #444;
    color: white;
    position: absolute;
}

#reasonBox {
    margin-top: 20px;
}

textarea {
    width: 260px;
    border-radius: 8px;
    padding: 10px;
    resize: none;
}

/* —Å–µ—Ä–¥–µ—á–∫–∏ */
.heart {
    position: absolute;
    color: pink;
    font-size: 20px;
    animation: float 6s linear infinite;
    opacity: 0.7;
}

@keyframes float {
    0% { transform: translateY(100vh); }
    100% { transform: translateY(-10vh); }
}
</style>
</head>

<body>

<div class="container">
    <h1>–¢—ã –±—É–¥–µ—à—å –º–æ–µ–π –≤–∞–ª–µ–Ω—Ç–∏–Ω–∫–æ–π? üíò</h1>

    <button id="yesBtn" onclick="yesClicked()">–î–∞ üíñ</button>
    <button id="noBtn" onclick="noClicked()">–ù–µ—Ç üò¢</button>

    <div id="reasonBox" style="display:none;">
        <p>–ü–æ—á–µ–º—É ¬´–Ω–µ—Ç¬ª? ü•∫</p>
        <textarea id="reasonInput" rows="4" placeholder="–ù–∞–ø–∏—à–∏, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞..."></textarea>
        <br><br>
        <button onclick="sendReason()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
    </div>
</div>

<script>
// —É–±–µ–≥–∞—é—â–∞—è –∫–Ω–æ–ø–∫–∞ "–Ω–µ—Ç"
const noBtn = document.getElementById("noBtn");

noBtn.addEventListener("mouseover", () => {
    const x = Math.random() * (window.innerWidth - 100);
    const y = Math.random() * (window.innerHeight - 50);
    noBtn.style.left = x + "px";
    noBtn.style.top = y + "px";
});

function noClicked() {
    document.getElementById("reasonBox").style.display = "block";
}

// –æ—Ç–ø—Ä–∞–≤–∫–∞ –ø—Ä–∏—á–∏–Ω—ã
function sendReason() {
    const text = document.getElementById("reasonInput").value.trim();

    if (text === "") {
        alert("–ù—É–∂–Ω–æ —á—Ç–æ-–Ω–∏–±—É–¥—å –Ω–∞–ø–∏—Å–∞—Ç—å üíî");
        return;
    }

    fetch("/save_reason", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ reason: text })
    }).then(() => {
        alert("–Ø –ø–æ–Ω—è–ª‚Ä¶ üíî");
    });
}

// —ç—Ñ—Ñ–µ–∫—Ç "–î–ê"
function yesClicked() {
    for (let i = 0; i < 30; i++) {
        createHeart(true);
    }
    alert("–£–†–ê–ê–ê üíñüíñüíñ");
}

// —Ñ–æ–Ω–æ–≤—ã–µ —Å–µ—Ä–¥–µ—á–∫–∏
function createHeart(explosion=false) {
    const heart = document.createElement("div");
    heart.className = "heart";
    heart.innerHTML = "‚ù§";
    heart.style.left = Math.random() * 100 + "vw";
    heart.style.fontSize = (Math.random() * 20 + 10) + "px";
    document.body.appendChild(heart);

    if (explosion) {
        heart.style.top = "50vh";
        heart.style.animation = "none";
        heart.animate([
            { transform: "translate(0,0)", opacity: 1 },
            { transform: translate(${Math.random()*200-100}px, ${Math.random()*200-100}px), opacity: 0 }
        ], { duration: 1000 });
    }

    setTimeout(() => heart.remove(), 6000);
}

setInterval(createHeart, 400);
</script>

</body>
</html>